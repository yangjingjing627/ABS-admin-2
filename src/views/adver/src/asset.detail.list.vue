<template>
  <div class="check-result">
    <go-back></go-back>
    <div v-if='getInfo' class="">
    <div class="main-over">
      <p>基本信息</p>
      <div class="main-info">
        <ul>
          <li><span>产品名称：</span><span class="pad10">{{ data.productName }}</span></li>
          <li><span>项目规模：</span><span class="pad10">{{ data.productSize }}</span></li>
          <li><span>预期收益率（1%）：</span><span class="pad10">{{ data.expectedProfitRate }}</span></li>
          <li><span>次优级认购方：</span>
            <span>
              <el-select v-model="subPosteriorSubscriber" disabled placeholder="请选择">
                <el-option
                  v-for="item in options"
                  :key="item.value"
                  :label="item.label"
                  :value="item.value">
                </el-option>
              </el-select>
            </span>
          </li>
          <li><span>差额支付承诺人：</span>
            <span>
              <el-select v-model="differencePaymentPromiser" disabled placeholder="请选择">
                <el-option
                  v-for="item in options"
                  :key="item.value"
                  :label="item.label"
                  :value="item.value">
                </el-option>
              </el-select>
            </span>
          </li>
          <li><span>资产评级费（元）：</span><span class="pad10">{{ data.ratingMoney }}</span></li>
          <li><span>会计费（元）：</span><span class="pad10">{{ data.accountantFee }}</span></li>
        </ul>
        <ul>
          <li><span>产品类型：</span>
            <span>
              <el-select v-model="productType" disabled placeholder="请选择">
                <el-option
                  v-for="item in options"
                  :key="item.value"
                  :label="item.label"
                  :value="item.value">
                </el-option>
              </el-select>
            </span>
          </li>
          <li><span>原始债权人：</span><span class="pad10">{{ data.creditor }}</span></li>
          <li><span>信托机构：</span>
            <span>
              <el-select v-model="spv" disabled placeholder="请选择">
                <el-option
                  v-for="item in options"
                  :key="item.value"
                  :label="item.label"
                  :value="item.value">
                </el-option>
              </el-select>
            </span>
          </li>
          <li><span>优先级认购方：</span>
            <span>
              <el-select v-model="value3" disabled placeholder="请选择">
                <el-option
                  v-for="item in options"
                  :key="item.value"
                  :label="item.label"
                  :value="item.value">
                </el-option>
              </el-select>
            </span>
          </li>
          <li><span>资产评级机构：</span>
            <span>
              <el-select v-model="ratingOrganisation" disabled placeholder="请选择">
                <el-option
                  v-for="item in options"
                  :key="item.value"
                  :label="item.label"
                  :value="item.value">
                </el-option>
              </el-select>
            </span>
          </li>
          <li><span>信托管理费（元）：</span><span class="pad10">{{ data.spvMoney }}</span></li>
          <li><span>备注：</span>
            <span class="pad10" v-if="data.comment">{{ data.comment }}</span>
            <span class="pad10" v-else>无</span>
          </li>
        </ul>
        <ul>
          <li><span>基础资产：</span><span class="pad10">{{ data.basicAsset }}</span></li>
          <li><span>支付方式：</span>
            <span>
              <el-select v-model="value3" disabled placeholder="请选择">
                <el-option
                  v-for="item in options"
                  :key="item.value"
                  :label="item.label"
                  :value="item.value">
                </el-option>
              </el-select>
            </span>
          </li>
          <li><span>次级认购方：</span>
            <span>
              <el-select v-model="posteriorSubscriber" disabled placeholder="请选择">
                <el-option
                  v-for="item in options"
                  :key="item.value"
                  :label="item.label"
                  :value="item.value">
                </el-option>
              </el-select>
            </span>
          </li>
          <li><span>会计师事务所：</span>
            <span>
              <el-select v-model="accountingFirm" disabled placeholder="请选择">
                <el-option
                  v-for="item in options"
                  :key="item.value"
                  :label="item.label"
                  :value="item.value">
                </el-option>
              </el-select>
            </span>
          </li>
          <li><span>律师事务所：</span>
            <span>
              <el-select v-model="lawFirm" disabled placeholder="请选择">
                <el-option
                  v-for="item in options"
                  :key="item.value"
                  :label="item.label"
                  :value="item.value">
                </el-option>
              </el-select>
            </span>
          </li>
          <li><span>律师费（元）：</span><span class="pad10">{{ data.lawyerMoney }}</span></li>
        </ul>
      </div>
    </div>
    <div class="main-over">
      <p>协议信息</p>
      <div class="main-info">
      <ul>
        <li><span>债权买卖协议：</span><span class="color-blue"><a @click="showAgreement(data.saleAgreementUrl)">{{ data.saleAgreementUrl }}</a></span></li>
        <li><span>法律意见书：</span><span class="color-blue"><a @click="showAgreement(data.legalOpinionUrl)">{{ data.legalOpinionUrl }}</a></span></li>
        <li><span>认购协议：</span><span class="color-blue"><a @click="showAgreement(data.subscriptionAgreementUrl)">{{ data.subscriptionAgreementUrl }}</a></span></li>
      </ul>
      <ul>
        <li><span>担保协议：</span><span class="color-blue"><a @click="showAgreement(data.guaranteeAgreementUrl)">{{ data.guaranteeAgreementUrl }}</a></span></li>
        <li><span>会计意见书：</span><span class="color-blue"><a @click="showAgreement(data.accountantOpinionUrl)">{{ data.accountantOpinionUrl }}</a></span></li>
      </ul>
      <ul>
        <li><span>资产评级说明：</span><span class="color-blue"><a @click="showAgreement(data.ratingInstructionUrl)">{{ data.ratingInstructionUrl }}</a></span></li>
        <li><span>产品计划说明书：</span><span class="color-blue"><a @click="showAgreement(data.productPlanInstructionUrl)">{{ data.productPlanInstructionUrl }}</a></span></li>
      </ul>
    </div>
    </div>
    <div class="main-over">
      <p>原始债权信息</p>
      <div class="main-info main-info-flex4">
        <ul>
          <li><span>债权资料：</span><span><input @click="downloadAllAsset(assetID)" type="button" name="" value="下载"></span></li>
        </ul>
        <ul></ul>
        <ul></ul>
      </div>
    </div>
  </div>
  <div class="tipInfo" v-else>请到资产管理页选择详情！</div>
  </div>
</template>
<script>
import AdService from '@/services/ad.service'
import cookie from 'arale-cookie'

let token = cookie.get('access_token')
let tokenStr = '?access_token=' + token

export default {
  data() {
    return {
      info: {},
      cover_data: {},
      city_count: {},
      API_HOST: 'https://dev-apis.qianbao.com/jiedai/v1/',
      // API_HOST: 'http://172.28.32.136:8088/',
      data: {},
      subPosteriorSubscriber: '无',
      differencePaymentPromiser: '',
      productType: '',
      spv: '',
      ratingOrganisation: '',
      accountingFirm: '',
      lawFirm: '',
      posteriorSubscriber: '',
      payOriginType: '按月支付',
      url: '',
      store_count: {},
      city: 'city',
      report: 'report',
      assetID: 0,
      options: [{
        value: '选项1',
        label: '黄金糕'
      }, {
        value: '选项2',
        label: '双皮奶'
      }, {
        value: '选项3',
        label: '蚵仔煎'
      }, {
        value: '选项4',
        label: '龙须面'
      }, {
        value: '选项5',
        label: '北京烤鸭'
      }],
      value3: '广东奥马电器广东奥马电器广东奥马电器',
      getInfo: false
    }
  },
  created() {
    console.log('---------' + cookie.get('access_token'))
    this.AdService = new AdService()
    if (!this.$route.query.assetID) {
      this.getInfo = false
    } else {
      this.getInfo = true
    }
  },
  mounted() {
    this.assetID = this.$route.query.assetID
    if (typeof (this.assetID) === 'string') {
      this.getAssetSingleInfo(this.assetID)
    }
  },
  methods: {
    async getAssetSingleInfo (assetID) {
      let res = await this.AdService.assetSingleInfo(assetID, cookie.get('access_token'))
      this.data = res
      this.subPosteriorSubscriber = res.subPosteriorSubscriber
      this.differencePaymentPromiser = res.differencePaymentPromiser
      this.spv = res.spv
      this.ratingOrganisation = res.ratingOrganisation
      this.subPosteriorSubscriber = res.subPosteriorSubscriber
      this.accountingFirm = res.accountingFirm
      this.productType = res.productType
      this.lawFirm = res.lawFirm
      this.posteriorSubscriber = res.posteriorSubscriber
    },
    async downloadAllAsset (assetID) {
      this.url = this.API_HOST + 'asset/' + assetID + '/debtsInfo' + tokenStr
      console.log('tokenStr  = ' + tokenStr)
      window.location.href = this.url
      // await this.AdService.downloadAsset(assetID)
      this.$notify.success('已打包成功')
    },
    async pp () {
      await this.AdService.getRatingUrl(cookie.get('access_token'))
      this.$notify.success('获取协议债权买卖成功')
    },
    showAgreement (url) {
      console.log('/asset/link?url=' + url)
      this.$router.push('/asset/link?url=' + url)
    }
  }
}
</script>
<style lang="scss" scoped>
@import 'scss/variables.scss';
.check-result {
  width: 100%;
  height: 100%;
  // background: $primary-font4;
  position: relative;
  .main-over {
    // width: 1284px;
    padding-right: 10px;
    p {
      width: 100%;
      height: 54px;
      padding: 14px 0 14px 30px;
      background-color: $list-checked-bg;
      font-size: 24px;
    }
    .main-info {
      width: 100%;
      display: flex;
    }
    ul {
      flex: 1;
      padding: 18px 0;
      li {
        width: 100%;
        height: 36px;
        display: table;
        line-height: 36px;
        font-size: 14px;
        margin: 4px 0;
        span:nth-child(1) {
          width: 120px;
          margin-left: 4px;
        }
        span {
          display: table-cell;;
          // width: 49%;
          a {
            display: block;
            width: 100%;
            height: 100%;
          }
          .el-select {
            width: 100%;
            height: 100%;
          }
          &:nth-child(1) {
            text-align: right;
            color: $primary-font3;
            font-weight: medium;
          }
          &:nth-child(2) {
            text-align: left;
            color: $primary-font1;
            margin-left: 7px;
          }
          &.pad10 {
            border: 1px solid $primary-font4;
            padding-left: 10px;
            box-sizing: border-box;
          }
          &.color-blue {
            color: #4990E2;
          }
        }
      }
    }
  }
}
.loading {
  width: 200px;
  height: 200px;
  background: #eee url(../../../assets/img/icon/loading45.gif) no-repeat center;
  background-size: 40px 40px;
}
input[type="button"] {
  width: 156px;
  height: 36px;
  line-height: 36px;
  display: block;
  background-color: $topic-color;
  color: #fff;
  border-radius: 4px;
}
.tipInfo {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  margin: auto;
  width: 300px;
  height: 30px;
  line-height: 80px;
  font-size: 20px;
  text-align: center;
}
</style>
